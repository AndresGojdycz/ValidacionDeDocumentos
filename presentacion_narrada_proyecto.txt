**Presentación Narrada: El Viaje de un Documento - Dentro del Validador Inteligente**

---

**(Apertura - Preparando el Escenario)**

"Imagina que eres el dueño de un negocio, quizás un empresario agrícola, o alguien que está lanzando una nueva empresa. Necesitas presentar una pila de documentos financieros a una institución – tal vez para un préstamo, o simplemente por cumplimiento anual. Tradicionalmente, esto es como una caja negra. Envías tus papeles, esperas, y cruzas los dedos, ¿verdad? Quisimos cambiar eso. Esa es la historia detrás de la 'Mesa de Entrada - Validador Inteligente de Documentos'."

**(La Idea Central - Lo Que Construimos)**

"Así que construimos esta aplicación web – un portal inteligente, en realidad. Su trabajo principal es hacer que todo el proceso de presentación y validación de esos documentos financieros cruciales sea mucho más fluido, rápido y transparente. Está diseñado para instituciones como el BROU, el Banco República, para ayudarles a gestionar la afluencia de papeleo de todo tipo de empresas."

"El objetivo real aquí era reducir el vaivén, la revisión manual de documentos y los errores del tipo 'ups, te faltó esto'. Queríamos dar a los usuarios una retroalimentación clara e instantánea y asegurarnos de que cada documento cumpla con los requisitos exactos desde el principio."

**(Los Primeros Pasos del Usuario - Empezando)**

"Cuando un usuario llega por primera vez a nuestro portal, no se limita a subir archivos. Comienza contándonos un poco sobre sí mismo. ¿Es una empresa regular? ¿Un negocio agrícola? ¿O una empresa completamente nueva? Esto es clave porque las necesidades documentales son diferentes para cada uno. También nos indican su 'Máximo Endeudamiento' **y, crucialmente para las proyecciones futuras, el 'Plazo Máximo de Deuda Tomada o a Tomar' en años.** Estas piezas de información son vitales, especialmente para determinar qué tipo de informe profesional necesita proporcionar su contador y para asegurar que las proyecciones financieras sean adecuadas."

"Esta configuración inicial es manejada por lo que llamamos el `FinancialDashboard` (Panel Financiero). Este se comunica con nuestro backend, utilizando Server Actions de Next.js, para recordar estos detalles. Piénsalo como preparar el escenario para los documentos que el sistema esperará."

**(Presentación de Documentos - Dos Caminos)**

"Una vez establecido el contexto, es hora de presentar los documentos reales. Ofrecimos a los usuarios dos formas principales de hacerlo:"

"Primero, la clásica **carga directa**. Puedes arrastrar y soltar tus PDFs, documentos de Word, hojas de Excel, incluso archivos de texto plano, directamente en el navegador. Hacemos una verificación rápida del tamaño del archivo – nada de más de 10MB – y del tipo de archivo básico. Estos archivos luego se envían de forma segura al almacenamiento de Vercel Blob. Ese es nuestro casillero en la nube para estos documentos. Nuestro componente `DocumentUploader` (Cargador de Documentos) se encarga de todo esto."

"Pero sabemos que mucha gente vive en **Google Drive**. Así que el segundo camino permite a los usuarios conectar su cuenta de Google directamente desde nuestra aplicación. Esto utiliza `NextAuth.js` para asegurar que sea seguro. Una vez conectados, pueden navegar por su Drive, elegir los archivos que necesitan, y nuestro sistema recupera el contenido. Incluso los archivos de Drive terminan en el almacenamiento de Vercel Blob antes de la validación principal, solo para mantener todo consistente."

**(La Magia Bajo el Capó - El Motor de Validación)**

"Aquí es donde las cosas se ponen interesantes. Una vez que un documento llega a nuestro sistema – en Vercel Blob – nuestro motor de validación principal, una server action llamada `validateDocument` (validarDocumento), se activa."

"Comienza con lo básico: verifica dos veces el formato del archivo e intenta extraer el año al que pertenece el documento, ya sea del nombre del archivo o inspeccionando el texto si es un archivo de texto."

"Luego, intenta **clasificar el documento**. ¿Es un Estado de Flujo de Fondos? ¿Un Balance General? ¿Un 'Informe Profesional'? ¿O quizás un DICOSE o DETA, que son formularios especiales para empresas agrícolas? Lo hace buscando palabras clave en el nombre del archivo y, de nuevo, en el contenido del texto si está disponible."

"Después de averiguar *qué* es, aplica reglas específicas. Por ejemplo, si ve un documento DICOSE, comprueba si la empresa realmente *es* agrícola o nueva, porque de lo contrario, no es necesario. También comprueba si el año en un formulario DICOSE coincide con el año en los Balances de la empresa – necesitan coincidir. **Además, para el Estado de Flujo de Fondos, ahora tenemos una validación muy importante. Si el usuario ha especificado un 'Plazo Máximo de Deuda', el sistema verifica que la proyección del flujo de fondos cubra adecuadamente ese período. Es decir, si tienen una deuda a 5 años, su flujo de fondos debe extenderse al menos 5 años en el futuro desde el año actual. Intentamos extraer el último año cubierto por la proyección del flujo de fondos y lo comparamos con este requisito.**"

"Pero la verdadera inteligencia proviene de cómo usamos la IA..."

**(El Asistente de IA - No Cualquier IA)**

"Hemos integrado la API de OpenAI – específicamente GPT-3.5 Turbo – para hacer parte del trabajo pesado que usualmente requiere un experto humano."

"Tomemos el **'Informe Profesional'**. El tipo de informe necesario (Compilación, Revisión Limitada o Auditoría completa) depende de cuánto esté endeudada la empresa. Así que enviamos el texto del informe y esa cifra de endeudamiento a la IA. Hemos entrenado a la IA con un prompt específico para que mire el informe y nos diga: 'Bien, basado en lo que estoy leyendo aquí, esto parece un informe de Compilación,' o 'Esto es definitivamente una Auditoría.' Luego verificamos si lo que la IA encontró coincide con lo que el banco realmente requiere para ese nivel de deuda."

"Para los **Balances Generales**, es aún más específico. Le pedimos a la IA que lea el balance, encuentre los Activos totales, los Pasivos totales y el Patrimonio Neto. Luego, le pedimos que verifique la regla fundamental: ¿Los Activos son iguales a los Pasivos más el Patrimonio? Lo realmente genial aquí es que no solo confiamos en la palabra de la IA. Nuestro sistema toma los números que la IA extrae y *vuelve a calcular* la ecuación por sí mismo. Es una doble verificación para asegurarnos de que todo esté perfecto."

"Y para los documentos **DETA**, que son específicos para empresas agrícolas, le pedimos a la IA que los lea y nos diga si encuentra declaraciones u opiniones explícitas sobre el flujo de caja proyectado de la explotación y una opinión general sobre su solicitud de crédito."

"Es importante destacar que esto no es solo un chatbot. Estamos haciendo solicitudes muy específicas a la IA, pidiéndole que realice tareas analíticas concretas. Ahora mismo, esto funciona mejor con texto plano. Una de las grandes cosas que queremos hacer a continuación es mejorar mucho en la extracción de todo el texto de los archivos PDF y Word para que la IA tenga información aún más rica con la que trabajar."

**(Viendo los Resultados - Retroalimentación y Claridad)**

"Después de toda esta verificación automatizada, el usuario ve todo presentado en una `DocumentList` (Lista de Documentos) clara. Cada documento se marca como 'Válido,' 'Inválido,' 'Faltante,' o a veces 'Parcial.' Si algo está mal, damos un mensaje claro explicando cuál es el problema, para que sepan exactamente qué corregir. El `FinancialDashboard` (Panel Financiero) también muestra un resumen de su estado general."

"Y, por supuesto, pueden eliminar y volver a cargar documentos según sea necesario. El sistema realiza un seguimiento de las últimas versiones."

**(Los Bloques de Construcción - Nuestras Elecciones Tecnológicas)**

"Para construir todo esto, utilizamos un conjunto de herramientas bastante moderno. En el **frontend**, es una aplicación Next.js 15, usando React 19 y TypeScript. Esto nos da una estructura basada en componentes realmente sólida. Usamos Tailwind CSS para el estilo, y un montón de excelentes componentes de UI de Shadcn UI y Radix UI para que las cosas se vean bien y funcionen bien. Íconos de Lucide para lo visual, y Sonner para esas pequeñas notificaciones emergentes."

"En el **backend y para los servicios**, Next.js sigue siendo la estrella, manejando nuestra lógica del lado del servidor con Server Actions y algunas rutas API tradicionales. Todo corre sobre Node.js. Vercel Blob es nuestra opción para almacenar todos los archivos cargados. La API de OpenAI, como hemos comentado, es nuestro cerebro de IA. Usamos la propia biblioteca `googleapis` de Google y `NextAuth.js` para conectarnos de forma segura a Google Drive. Una cosa a tener en cuenta – ahora mismo, la lista de documentos y la configuración del usuario se mantienen en memoria en el servidor. Para un sistema multiusuario real, en producción, moveríamos esto a una base de datos adecuada."

**(Cómo Se Conecta Todo - El Flujo de Datos)**

"Así que, cuando haces clic en un botón en el sitio web – digamos, para validar un documento o listar tus archivos de Google Drive – eso usualmente dispara una Server Action en nuestro backend de Next.js. Si estás subiendo un archivo directamente, eso pasa por una ruta API específica que luego habla con Vercel Blob."

"Nuestro backend luego se coordina con los servicios externos. Le dice a Vercel Blob que almacene archivos, envía fragmentos de texto a OpenAI para su análisis, y usa los tokens de `NextAuth.js` para solicitar de forma segura a Google Drive listas de archivos y contenido."

**(Dónde Brillamos y Qué Sigue)**

"Lo que hace que este proyecto realmente destaque, creemos, es cómo entiende el *contexto* – el tipo de empresa, las cifras financieras – y usa eso para impulsar la validación. El uso inteligente y específico de la IA para tareas como clasificar informes o verificar balances es un gran avance respecto a las simples comprobaciones de palabras clave. Y ofrecer tanto cargas directas como integración con Google Drive se trata simplemente de facilitar la vida al usuario. **La validación del Estado de Flujo de Fondos contra el plazo de deuda especificado añade una capa importante de previsión financiera.**"

"Pero no hemos terminado. El siguiente gran paso es conseguir extraer realmente bien **todo el texto de cualquier archivo PDF, Word o Excel** que se cargue. Eso haría que nuestro análisis de IA fuera increíblemente potente en todos los tipos de documentos. Y, por supuesto, pasar a una **base de datos real** es esencial para un sistema en producción. Siempre hay espacio para hacer la experiencia del usuario aún más fluida y los mensajes de error aún más claros."

**(Reflexiones Finales)**

"Así que, la 'Mesa de Entrada - Validador Inteligente de Documentos' es nuestra visión para transformar un proceso tradicionalmente engorroso en algo mucho más eficiente, inteligente y fácil de usar. Se trata de usar herramientas web modernas y un poco de inteligencia artificial para marcar una diferencia real en cómo se manejan los documentos financieros. Creemos que es una base sólida que puede convertirse en una herramienta aún más poderosa."

--- 